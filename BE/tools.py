# tools.py
from langchain_core.tools import tool

# --- Medication Tools ---
@tool
def get_diabetes_medication(query: str) -> str:
    """Use ONLY for Diabetes (เบาหวาน) medication details."""
    return """
    ข้อมูลยาเบาหวาน (Diabetes Meds):
    1. **ยาเม็ดสีขาว (Metformin)**: รูปทรงเม็ดวงรี/กลมใหญ่ ทานหลังอาหารทันที (เช้า-เย็น) ช่วยลดน้ำตาล
    2. **ยาเม็ดเล็กสีขาว/เหลือง (Glipizide)**: เม็ดกลมเล็ก ทานก่อนอาหาร 30 นาที (เช้า) *ระวังน้ำตาลตกถ้าอดข้าว*
    3. **ยาแคปซูล**: มักเป็นวิตามินบำรุงปลายประสาท (เขียว-เหลือง) ทานหลังอาหารเช้า
    4. **อินซูลิน**: ยาฉีด (ห้ามเขย่าแรง) ฉีดตามเวลาแพทย์สั่ง
    """

@tool
def get_typhoid_medication(query: str) -> str:
    """Use ONLY for Typhoid (ไทฟอยด์) medication details."""
    return """
    ข้อมูลยาไทฟอยด์ (Typhoid Meds):
    1. **ยาแคปซูล (Antibiotics)**: สีเขียว/ฟ้า หรือ ขาว-ชมพู (เช่น Ciprofloxacin) ต้องทานหลังอาหารและ **ทานให้หมดแผง** ห้ามหยุดเอง
    2. **ยาพาราเซตามอล**: เม็ดสีขาว ทานเฉพาะเมื่อมีไข้สูง ห่างกันทุก 4-6 ชม.
    3. **เกลือแร่ (ORS)**: จิบแทนน้ำหากมีอาการถ่ายเหลว
    """

# --- Exercise Tools ---
@tool
def get_diabetes_exercise(query: str) -> str:
    """Use ONLY for Diabetes (เบาหวาน) exercise."""
    return """
    การออกกำลังกายเบาหวาน (Diabetes Exercise):
    1. **ประเภท**: แอโรบิก (เดินเร็ว, ปั่นจักรยาน, ว่ายน้ำ) 30 นาที/วัน + เวทเทรนนิ่งเบาๆ 2 วัน/สัปดาห์
    2. **ข้อควรระวังพิเศษ**:
       - **ห้ามเดินเท้าเปล่า**: ต้องสวมรองเท้าผ้าใบเสมอเพื่อกันเกิดแผลที่เท้า
       - **เช็กน้ำตาล**: ถ้าน้ำตาลต่ำกว่า 100 mg/dL ให้กินขนมรองท้องก่อนออกกำลังกาย
       - **หยุดทันที**: หากมีอาการหน้ามืด ใจสั่น เหงื่อออกตัวเย็น (น้ำตาลตก)
    """

@tool
def get_typhoid_exercise(query: str) -> str:
    """Use ONLY for Typhoid (ไทฟอยด์) exercise."""
    return """
    การออกกำลังกายไทฟอยด์ (Typhoid Exercise):
    1. **ช่วงมีไข้**: **งดออกกำลังกายเด็ดขาด** (Bed Rest) เสี่ยงลำไส้ทะลุหรือตกเลือด
    2. **ช่วงฟื้นตัว**:
       - สัปดาห์แรก: เน้นเดินช้าๆ ในบ้าน
       - ห้ามยกของหนัก หรือเกร็งหน้าท้อง จนกว่าจะหายสนิทอย่างน้อย 2 สัปดาห์
       - ร่างกายจะอ่อนเพลียง่ายมาก ต้องพักผ่อนให้มากที่สุด
    """

# --- Diet Tools ---
@tool
def get_diabetes_diet(query: str) -> str:
    """Use ONLY for Diabetes (เบาหวาน) diet."""
    return """
    อาหารเบาหวาน (Diabetes Diet):
    1. **สูตรจานอาหาร 2:1:1**: ผัก 2 ส่วน : ข้าว(ไม่ขัดสี) 1 ส่วน : เนื้อสัตว์(ไม่ติดมัน) 1 ส่วน
    2. **ผลไม้**:
       - ทานได้: ฝรั่ง, แอปเปิ้ล, แก้วมังกร (รสไม่หวานจัด)
       - **เลี่ยง/งด**: ทุเรียน, ขนุน, มะม่วงสุก, ลำไย
    3. **เครื่องดื่ม**: น้ำเปล่าดีที่สุด งดชาไข่มุก/กาแฟใส่นมข้นหวาน/น้ำอัดลม
    4. **การกิน**: กินให้ตรงเวลา ห้ามอดมื้อกินมื้อ ป้องกันน้ำตาลแกว่ง
    [Image of Healthy Plate Model 2:1:1]
    """

@tool
def get_typhoid_diet(query: str) -> str:
    """Use ONLY for Typhoid (ไทฟอยด์) diet."""
    return """
    อาหารไทฟอยด์ (Typhoid Diet):
    1. **หลักการ**: "สุก-ร้อน-สะอาด-ย่อยง่าย-กากใยน้อย"
    2. **เมนูแนะนำ**: โจ๊กหมู, ข้าวต้มปลา, ไข่ตุ๋น, แกงจืดเต้าหู้, ซุปใส
    3. **สิ่งที่ต้องงด**:
       - ผักผลไม้สด (เสี่ยงเชื้อปนเปื้อน)
       - อาหารรสจัด/เผ็ดร้อน (ส้มตำ, ยำ)
       - ของหมักดอง
       - นมวัว (บางรายอาจท้องอืดช่วงนี้)
       - น้ำแข็งเปล่า (ดื่มน้ำขวดปิดสนิทเท่านั้น)
    """

# --- Transport Tools ---
@tool
def get_diabetes_transport(query: str) -> str:
    """Use ONLY for Diabetes (เบาหวาน) transport/travel."""
    return """
    การเดินทางเบาหวาน (Diabetes Travel):
    1. **การพกยา**:
       - **อินซูลิน**: ห้ามโหลดใต้เครื่อง (จะแข็ง/เสื่อมสภาพ) ให้ใส่กระเป๋าถือขึ้นเครื่อง
       - เตรียมยาไปเผื่อเกินจำนวนวันเดินทาง 2-3 วัน
    2. **เอกสาร**: พกใบรับรองแพทย์ (Medical ID) ระบุว่าเป็นเบาหวานและมียาฉีด
    3. **ระหว่างเดินทาง**:
       - พก **ลูกอม/น้ำหวาน** ติดตัวเสมอ เผื่อรถติด/เครื่องดีเลยแล้วไม่ได้กินข้าว
       - สวมรองเท้าที่สบาย ไม่รัดแน่น ป้องกันแผลกดทับขณะนั่งนานๆ
    """

@tool
def get_typhoid_transport(query: str) -> str:
    """Use ONLY for Typhoid (ไทฟอยด์) transport/travel."""
    return """
    การเดินทางไทฟอยด์ (Typhoid Travel):
    1. **ระยะแพร่เชื้อ**: **ควรงดเดินทาง** ถ้าไม่จำเป็น เพื่อป้องกันการแพร่เชื้อสู่ผู้อื่น
    2. **หากจำเป็นต้องเดินทาง**:
       - สวมหน้ากากอนามัยตลอดเวลา
       - **ล้างมือบ่อยๆ**: ด้วยสบู่หรือเจลแอลกอฮอล์ โดยเฉพาะหลังเข้าห้องน้ำ
       - **ระวังเรื่องกิน**: กินเฉพาะอาหารปรุงสุกใหม่ๆ ร้อนๆ เท่านั้น
       - **น้ำดื่ม**: ดื่มน้ำจากขวดที่ปิดซีลสนิท ห้ามดื่มน้ำจากแก้วสาธารณะหรือน้ำแข็ง
    """

# --- Bundle Tools ---
med_tools = [get_diabetes_medication, get_typhoid_medication]
exercise_tools = [get_diabetes_exercise, get_typhoid_exercise]
diet_tools = [get_diabetes_diet, get_typhoid_diet]
transport_tools = [get_diabetes_transport, get_typhoid_transport]